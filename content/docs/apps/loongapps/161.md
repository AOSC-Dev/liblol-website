---
id: 161
title: "向日葵"
weight: 161
version: "11.0.0.38604"
updateTime: "2022-11-10T17:17:30"
debName: "http://113.24.212.22:8090/upload/file/sunloginclient-11.0.0.38604-loongarch.deb"
debSize: "17.6 MB"
command: "/usr/local/sunlogin/bin/sunloginclient"
compatibility: 2
---

{{< issue 无法在非原厂支持系统中安装 >}}
向日葵原厂打包质量存在问题且安装配置脚本只适配了特定发行版，在 AOSC OS 上需要进行额外配置才能使用。

#### AOSC OS

使用上述命令安装后会报错（输出类似下例）：

```bash
正在解压 sunloginclient (11.0.0.38604) 并覆盖 (11.0.0.38604) ...
正在设置 sunloginclient (11.0.0.38604) ...
Error:unknown OS it not impl
Installation failed
dpkg: 处理软件包 sunloginclient (--configure)时出错： 已安装 sunloginclient 软件包 post-installation 脚本 子进程返回错误状态 1
```

这属于正常现象，**切勿随意操作！**

在 oma 报错后，请下载[此脚本](/scripts/sunloginclient-fixup.sh)，而后在脚本所在目录运行如下命令：

```bash
sudo bash sunloginclient-fix.bash
```

命令完成后即可正常使用。

如果AOSC使用向日葵作为受控端，你需要开放 X server 的访问权限，需执行如下命令： 
```bash
xhost +
```
以上命令在系统重新启动后需再次执行。


**使用向日葵进行无人值守的建议**

1. 新建一个自启动脚本，例如  `~/.local/bin/xhost-hack.sh` ，创建过程如下：
```bash
mkdir -p ~/.local/bin
echo '#!/bin/bash' > ~/.local/bin/xhonst-hack.sh
echo 'xhost +' >> ~/.local/bin/xhonst-hack.sh
chmod +x ~/.local/bin/xhonst-hack.sh
echo ~/.local/bin/xhonst-hack.sh  #生成自启动脚本完整路径
```

2. 打开 KDE 桌面的自动登录功能：  
点击“设置——工作区——开机与关机——登录屏幕(SSDM)”或者在设置中搜索“登录屏幕”，再点击下方的“行为设置”，勾选“自动登录”选项。

3. 将自启动脚本添加到 KDE 的启动程序中：  
点击“设置——工作区——开机与关机——自动启动”或者在设置中搜索“自动启动”，再点击下方的“添加——添加应用程序”，将第一步中最后一行命令所生成的，自启动脚本完整路径添加到启动程序。该路径通常为 `/home/xxxx/.local/bin/xhonst-hack.sh` ，其中 `xxxx` 为当前用户名。

4. 注意：`xhost +` 命令允许所有用户连接到你的 X server ，这可能会带来安全风险。在生产环境中或者有多用户的环境中，建议谨慎启用无人值守功能。


#### 其他系统

如果您是通过解压安装该软件的，请依次运行如下命令：

```bash
# 安装与启用服务
sudo cp -v /usr/local/sunlogin/scripts/runsunloginclient.service \
    /etc/systemd/system/runsunloginclient.service
sudo systemctl enable runsunloginclient.service --now

# 修正皮肤数据包权限位
sudo chmod 666 /usr/local/sunlogin/res/skin/*
```

{{< /issue>}}
